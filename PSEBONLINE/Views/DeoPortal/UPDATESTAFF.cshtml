@model PSEBONLINE.Models.DEOModel
@{
    Layout = "~/Views/Shared/_Headerdeo.cshtml";
}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<h1>Update Staff Details</h1>
@using (Html.BeginForm("UPDATESTAFF", "DeoPortal", FormMethod.Post, new { id = "searchform" }))
{
    <div class="row">
        <div class="col-md-12">
                    <table class="table table-bordered" id="t01">
                        <tbody>
                            <tr class="active-tr">
                                <th>Block Code</th>
                                <th>Block Name</th>
                                <th>Block School Code</th>
                            </tr>
                            @{
                                if (ViewBag.TotalCount > 0)
                                {

                                    <tr>
                                        <td>@ViewBag.ClusterCode</td>
                                        <td>@ViewBag.ClusterName</td>
                                        <td>@ViewBag.ClusterSchoolCode</td>
                                    </tr>

                                }

                                else
                                {
                                    <tr>
                                        <td colspan="3">
                                            @ViewBag.Message
                                        </td>
                                    </tr>
                                }
                            }

                        </tbody>
                    </table>
                </div>
                <div class="clearfix"></div>
                <div class="col-md-2">
                    Type Of Duty <span class="rqf">*</span>
                </div>
                <div class="col-md-4">
                    @{
                        List<SelectListItem> DutyList = new List<SelectListItem>();
                        DutyList.Add(new SelectListItem { Text = "--SELECT Type Of Duty--", Value = "0" });
                        DutyList.Add(new SelectListItem { Text = "Superintendent", Value = "1" });
                        DutyList.Add(new SelectListItem { Text = "Deputy Superintendent", Value = "2" });
                        DutyList.Add(new SelectListItem { Text = "Invigilator", Value = "3" });
                    }
                    @Html.DropDownList("typeDuty", DutyList, new { id = "typeDuty" })
                </div>
                <div class="col-md-2">
                    Teacher's Name
                </div>
                <div class="col-md-4">@Html.TextBoxFor(m => m.StaffName, new { id = "StaffName", @maxlength = "50" })</div>
                <div class="clearfix"></div>
                <div class="col-md-2">
                    Father's Name <span class="rqf">*</span>
                </div>
                <div class="col-md-4">
                    @Html.TextBoxFor(m => m.StaffFatherName, new { id = "StaffFatherName", @maxlength = "50" })
                </div>
                <div class="col-md-2">
                    Experience <span class="rqf">*</span>
                </div>
                <div class="col-md-4">
                    @Html.DropDownList("experience", new SelectList(ViewBag.exp, "Value", "Text"), "--Select YEAR---", new { @class = "" })

                    @{
                        List<SelectListItem> EXPMON = new List<SelectListItem>();
                        EXPMON.Add(new SelectListItem { Text = "--MONTH--", Value = "0" });
                        EXPMON.Add(new SelectListItem { Text = "1", Value = "1" });
                        EXPMON.Add(new SelectListItem { Text = "2", Value = "2" });
                        EXPMON.Add(new SelectListItem { Text = "3", Value = "3" });
                        EXPMON.Add(new SelectListItem { Text = "4", Value = "4" });
                        EXPMON.Add(new SelectListItem { Text = "5", Value = "5" });
                        EXPMON.Add(new SelectListItem { Text = "6", Value = "6" });
                        EXPMON.Add(new SelectListItem { Text = "7", Value = "7" });
                        EXPMON.Add(new SelectListItem { Text = "8", Value = "8" });
                        EXPMON.Add(new SelectListItem { Text = "9", Value = "9" });
                        EXPMON.Add(new SelectListItem { Text = "10", Value = "10" });
                        EXPMON.Add(new SelectListItem { Text = "11", Value = "11" });
                    }
                    @Html.DropDownList("expmonth", EXPMON, new { id = "expmonth" })

                </div>
                <div class="clearfix"></div>
                <div class="col-md-2">
                    Gender
                </div>
                <div class="col-md-4">
                    @{
                        List<SelectListItem> genderList = new List<SelectListItem>();
                        genderList.Add(new SelectListItem { Text = "--SELECT GENDER--", Value = "0" });
                        genderList.Add(new SelectListItem { Text = "MALE", Value = "MALE" });
                        genderList.Add(new SelectListItem { Text = "FEMALE", Value = "FEMALE" });
                    }
                    @Html.DropDownList("gender", genderList, new { id = "gender" })
                </div>
                <div class="col-md-2">
                    Mobile No.
                </div>
                <div class="col-md-4">@Html.TextBoxFor(m => m.Mobile, new { id = "Mobile", @maxlength = "50" })</div>
                <div class="clearfix"></div>
                @*<div class="col-md-2">
                    SCHOOL CODE <span class="rqf">*</span>
                </div>
                <div class="col-md-4">
                    @Html.TextBoxFor(m => m.schlcode, new { id = "schlcode", @maxlength = "7" })
                </div>*@
                <div class="col-md-2">
                    School Name <span class="rqf">*</span>
                </div>
                <div class="col-md-4">
                    @Html.DropDownList("Selschool", new SelectList(ViewBag.schl, "Value", "Text", ViewBag.schl12), "--Select School Name---", new { @class = "" })
                </div>
                <div class="col-md-2" id="OSchlT" style="display:none;">
                    Other School <span class="rqf">*</span>
                </div>
                <div class="col-md-4" id="OSchl" style="display:none;">
                    @Html.TextBoxFor(m => m.Otherschl, new { id = "Otherschl", })
                </div>       
                <div class="clearfix"></div>
                <div class="col-md-2">
                    Aadhar Number <span class="rqf">*</span>
                </div>
                <div class="col-md-4">
                    @Html.TextBoxFor(m => m.adharno, new { id = "adharno", @maxlength = "12" })
                </div>
                <div class="col-md-2">
                    E-Punjab ID <span class="rqf">*</span>
                </div>
                <div class="col-md-4">
                    @Html.TextBoxFor(m => m.teacherepunjabid, new { id = "teacherepunjabid", @maxlength = "50" })
                </div>
                <div class="clearfix"></div>
                <div class="col-md-2">
                    Cadre <span class="rqf">*</span>
                </div>
                <div class="col-md-4">
                    @Html.DropDownList("cadre", new SelectList(ViewBag.Dcadre, "Value", "Text"), "--Select CADRE---", new { @class = "" })
                </div>
                <div class="col-md-2">
                    Subject / Designation <span class="rqf">*</span>
                </div>
                <div class="col-md-4">
                    @Html.DropDownList("desi", new SelectList(ViewBag.Mydesi, "Value", "Text"), "--Select Designation---", new { @class = "" })
                    @*@Html.TextBoxFor(m => m.designation, new { id = "designation", @maxlength = "50" })*@
                </div>
                <div class="clearfix"></div>
                <div class="col-md-2">
                    BANK IFSC CODE <span class="rqf">*</span>
                </div>
                <div class="col-md-4">
                    @Html.TextBoxFor(m => m.ifsccode, new { id = "ifsccode", @maxlength = "50" })

                </div>
                <div class="col-md-2">
                    BANK ACC NO. <span class="rqf">*</span>
                </div>
                <div class="col-md-4">
                    @Html.TextBoxFor(m => m.bankaccno, new { id = "bankaccno", @maxlength = "50" })
                </div>
                <div class="clearfix"></div>
                <div class="col-md-2" style="visibility:hidden;">
                    School Code <span class="rqf">*</span>
                </div>
                <div class="col-md-4" style="visibility:hidden;">
                    @Html.TextBoxFor(m => m.schlcode, new { id = "schlcode", @maxlength = "7" })
                </div>  
        </div>
    <div class="clearfix"></div>
    <div class="col-md-12 text-centre">
        <input type="submit" value="UPDATE STAFF" onclick="return valForm();" />
        @*<input type="button" value="VIEW STAFF" onclick="location.href='@Url.Action("VIEWSTAFF", "DeoPortal",new { id = encrypt.QueryStringModule.Encrypt(ViewBag.ClusterCode) })'">*@
        @*@Html.ActionLink("VIEW STAFF", "VIEWSTAFF", new { id = encrypt.QueryStringModule.Encrypt(@ViewBag.ClusterCode) })*@
        <input type="button" value="Reset" onClick="this.form.reset()" />
        <input type="button" value="Back" onclick="history.go(-1);" />
    </div>
    }
@{
    if (ViewData["result"] != null)
    {
        if (ViewData["result"].ToString() == "1")
        {
            <script type="text/javascript" language="javascript">
                alert("Data Updated Successfully");
                window.location.href = '@Url.Action("VIEWSTAFF", "DeoPortal")';
            </script>}
        else if (ViewData["result"].ToString() == "0")
        {
            <script type="text/javascript" language="javascript">
                    alert("Data Already Exist");
            </script>
        }
        else if (ViewData["result"].ToString() == "-1")
        {
            <script type="text/javascript" language="javascript">
                    alert("Data not saved..plz try again");
            </script>
        }
    }
}
<script type="text/javascript">
        $(document).ready(function () {

            var selectedVal = $("#schlcode").val();
            //alert(selectedVal);
            if (selectedVal == "*******") {

                $('#OSchl').css("display", "block");
                $('#OSchlT').css("display", "block");
            }
            else {
                $('#OSchl').css("display", "none");
                $('#OSchlT').css("display", "none");
              //  $("#Selschool").val("Others");
                //$("#Selschool").append('<option value="Others">Others</option>');

            }
            @*var selectedCAD = { CAD: $("#cadre").val() };
            //alert($("#cadre").val());
                $.ajax({
                    url: '@Url.Action("GETDSTAFFESIGNATION", "DeoPortal")',
                    type: 'Post',
                    contentType: 'application/json',
                    dataType: 'json',
                    data: JSON.stringify(selectedCAD),
                    success: function (cadres) {
                        //$("#desi").empty();
                        $.each(cadres, function (i, desiList) {
                            alert(desiList.Value);
                            //$("#desi").val(desiList.Value);
                            $("#desi").append('<option value="'
                               + desiList.Value + '">'
                               + desiList.Text + '</option>');
                        });
                        if (desiList.success) {


                        }
                        else {
                            alert('invalid ID' + data.success);
                        }
                    }
                });*@
        });
    </script>
<script type="text/javascript">
    $(document).ready(function () {

        $("#schlcode").change(function () {

            var selectedSCHL = { SCHL: $("#schlcode").val() };
            $.ajax({
                url: '@Url.Action("GETSchoolName", "DeoPortal")',
                type: 'Post',
                contentType: 'application/json',
                dataType: 'json',
                data: JSON.stringify(selectedSCHL),
                success: function (Schools) {

                    $.each(Schools, function (i, SCHList) {
                       // alert(SCHList.Value);
                        $("#Selschool").val(SCHList.Value);
                        //$("#Selschool").append('<option value="'
                        //   + SCHList.Value + '">'
                        //   + SCHList.Text + '</option>');
                    });
                    if (SCHList.success) {

                    }
                    else {
                        alert('invalid ID' + data.success);
                    }
                }
            });
        });

        $("#Selschool").change(function () {
            var selectedVal = $("#Selschool").val();           
            if (selectedVal == "Others") {
                $('#OSchl').css("display", "block");
                $('#OSchlT').css("display", "block");
            }
            else {
                $('#OSchl').css("display", "none");
                $('#OSchlT').css("display", "none");
                $("#schlcode").val("*******");

            }

            var selectedSCHL = { SCHL: $("#Selschool").val() };
            $.ajax({
                url: '@Url.Action("GETSchoolName", "DeoPortal")',
                type: 'Post',
                contentType: 'application/json',
                dataType: 'json',
                data: JSON.stringify(selectedSCHL),
                success: function (Schools) {

                    $.each(Schools, function (i, SCHList) {
                        $("#schlcode").val(SCHList.Value);

                    });
                    if (SCHList.success) {

                    }
                    else {
                        alert('invalid ID' + data.success);
                    }
                }
            });
        });
        $("#cadre").change(function () {
            var selectedCAD = { CAD: $("#cadre").val() };
            $.ajax({
                url: '@Url.Action("GETDSTAFFESIGNATION", "DeoPortal")',
                type: 'Post',
                contentType: 'application/json',
                dataType: 'json',
                data: JSON.stringify(selectedCAD),
                success: function (cadres) {
                    $("#desi").empty();
                    $.each(cadres, function (i, desiList) {

                        $("#desi").append('<option value="'
                           + desiList.Value + '">'
                           + desiList.Text + '</option>');
                    });
                    if (desiList.success) {


                    }
                    else {
                        alert('invalid ID' + data.success);
                    }
                }
            });
        });
    });
</script>
<script type="text/javascript">
    function valForm()
    {
        var td = document.getElementById("typeDuty");
        var sn = document.getElementById("StaffName");
        var sfn = document.getElementById("StaffFatherName");
        var expyear = document.getElementById("experience");
        var expmon = document.getElementById("expmonth");
        var gen = document.getElementById("gender");
        var mob = document.getElementById("Mobile");
        var sc = document.getElementById("schlcode");
        var scname = document.getElementById("Selschool");
        var aadhar = document.getElementById("adharno");
        var punid = document.getElementById("teacherepunjabid");
        var cadre = document.getElementById("cadre");
        var desi = document.getElementById("desi");
        var ifc = document.getElementById("ifsccode");
        var accno = document.getElementById("bankaccno");

        if (td.value == "" || td.value == "0") {
            alert("Please Select Type Of Duty");
            td.focus();
            return false;
        }
        if (sn.value == "") {
            alert("Please Enter Teacher's Name ");
            sn.focus();
            return false;
        }
        if (sfn.value == "") {
            alert("Please Enter Teacher's Father Name");
            sfn.focus();
            return false;
        }
        if (expyear.value == "" || expyear.value == "0") {
            alert("Please Select Year");
            expyear.focus();
            return false;
        }
        if (expmon.value == "" || expmon.value == "0") {
            alert("Please Select Month");
            expmon.focus();
            return false;
        }
        if (gen.value == "" || gen.value == "0") {
            alert("Please Select Gender");
            gen.focus();
            return false;
        }
        if (mob.value == "" ) {
            alert("Enter Mobile Number");
            mob.focus();
            return false;
        }
        //if (sc.value == "") {
        //    alert("Enter School Code");
        //    sc.focus();
        //    return false;
        //}
        if (sc.value == "") {
            if (scname.value != "Others") {
                alert("Enter School Code");
                sc.focus();
                return false;
            }


        }
        if (scname.value == "Others") {
            if (Other.value == "" || scname.value == "0") {
                alert("Enter Other schl");
                Other.focus();
                return false;
            }

        }
        if (scname.value == "" || scname.value == "0") {
            alert("Please Select School Name");
            scname.focus();
            return false;
        }
        if (aadhar.value == "") {
            alert("Enter Mobile Adhar number");
            aadhar.focus();
            return false;
        }
        if (aadhar != "") {
            if (aadhar.value.trim().length != 12) {
                alert("Please Enter 12 digits Aadhar No");
                aadhar.focus();
                return false;
            }
        }
        //if (punid.value == "") {
        //    alert("Enter Punjab Id");
        //    return false;
        //}
        if (cadre.value == "" || cadre.value == "0") {
            alert("Please Select Cadre");
            cadre.focus();
            return false;
        }
        if (desi.value == "" || desi.value == "0") {
            alert("Please Enter Subject/Designation ");
            desi.focus();
            return false;
        }
        if (ifc.value == "") {
            alert("Enter IFSC Code");
            td.focus();
            return false;
        }
        if (accno.value == "") {
            alert("Enter Bank Account Number");
            accno.focus();
            return false;
        }
        return true;
    }
</script>